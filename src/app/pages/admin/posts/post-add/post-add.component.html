<app-navbar></app-navbar>

<div class="form-title">
  <h2>Post</h2>
</div>

{{ post | json }}

<div class="main-content">
  <form #formAdd="ngForm" (ngSubmit)="onSubmit()">
    <div class="mb-3">
      <label class="form-label">Title</label>
      <input
        type="text"
        class="form-control"
        placeholder="title"
        name="title"
        #title="ngModel"
        required
        minlength="5"
        [(ngModel)]="post.title"
      />
      <div *ngIf="title.errors" class="alert">
        <div
          class="alert alert-danger"
          *ngIf="title.errors?.['required'] && (title.dirty || title.touched)"
        >
          title is required
        </div>
        <div
          class="alert alert-danger"
          *ngIf="title.errors?.['minlength'] && (title.dirty || title.touched)"
        >
          Min length is 5
        </div>
      </div>
    </div>

    <div class="mb-3">
      <label class="form-label">image</label>
      <input
        type="text"
        class="form-control"
        placeholder="image"
        name="image"
        [(ngModel)]="post.image"
      />
    </div>
    <div class="mb-3">
      <label class="form-label">short-desc</label>
      <input
        type="text"
        class="form-control"
        name="shortDesc"
        #shortDesc="ngModel"
        required
        placeholder="shortDesc"
        [(ngModel)]="post.shortDesc"
      />
      <div *ngIf="shortDesc.errors" class="alert">
        <div
          class="alert alert-danger"
          *ngIf="shortDesc.errors?.['required'] && (shortDesc.dirty || shortDesc.touched)"
        >
          shortDesc is required
        </div>
      </div>
    </div>

    <div class="mb-3">
      <label class="form-label">desc</label>
      <input
        type="text"
        class="form-control"
        name="desc"
        #desc="ngModel"
        required
        placeholder="desc"
        [(ngModel)]="post.desc"
      />
      <div *ngIf="desc.errors" class="alert">
        <div
          class="alert alert-danger"
          *ngIf="desc.errors?.['required'] && (desc.dirty || desc.touched)"
        >
          desc is required
        </div>
      </div>
    </div>
    <div class="mb-3">
      <label class="form-label">createAt</label>
      <input
        type="datetime"
        class="form-control"
        name="createAt"
        #createAt="ngModel"
        required
        placeholder="createAt"
        [(ngModel)]="post.createAt"
      />
      <div *ngIf="createAt.errors" class="alert">
        <div
          class="alert alert-danger"
          *ngIf="createAt.errors?.['required'] && (createAt.dirty || createAt.touched)"
        >
        createAt is required
        </div>
      </div>
    </div>
    <div class="mb-3">
        <select class="form-select" aria-label="Default select example" [(ngModel)]="post.categoryPostId" name="categoryPostId">
            <option selected>Category</option>
            <option *ngFor="let cate of categoryPost" value="{{cate.id}}">{{cate.name}}</option>
          </select>
    </div>

    <button [disabled]="!formAdd.valid" class="btn btn-success">Submit</button>
    <button routerLink="/admin/posts" class="btn btn-dark back-list">
      Back
    </button>
  </form>
</div>
